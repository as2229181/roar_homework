
# First question sql vs No sql

**資料儲存型態**

 - **SQL**

    主要是以<font color="red">表格</font>儲存資料，格式設計嚴格，欄定義屬性(名字)以及定義域(資料型態)，列為每筆儲存的資料，表與表之間可以透過外鍵建立關聯，可以從某張表獲取有建立關聯的表之資料。
 - **No SQL**

    有很多儲存方式，鍵值對、文件、圖型等等等，對於資料的規定比較不嚴謹，但也儲存資料很多彈性可以除儲存不同類型的資料。

**擴展性**
    兩者都可以過增加硬體效能實現垂直擴展
 -  **SQL**:

    水平擴展較為麻煩，要考慮到資料的完整性，可以透過數據分片以及ACID的性質來進行，但必須設計適當否則可能造成效能下降，ex: 分片太多造成資料索引困難。

 - **No SQL**:

    適合水平擴展，可以透過AP或是CP的特性來達到資料一致性。

**資料完整性**

 -  **SQL**:

    透過ACID 來達到 資料完整性
    - A 原子性: 只有COMMIT 跟 ROLLBACK 這兩種結果
    - C 一致性: 交易前即交易後都會驗證資料以及確認資料操作結果是否一致
    - I 獨立性: 資料庫會有很多交易同時進行，如果某筆交易還未完成其使用的資料不會被其他交易使用
    - D 持舊性: 交易成功後所有變動是永久的

- **No SQL**:

    - C 一致性: 所有的節點在同一時間獲得的同一筆資料式一樣的
    - A 可用性: 一定可以拿到資料，但不一定是最新的資料
    - P 分區容忍: 一個節點失效時不會影響其運作

**適合場景**
- SQL :

    需要良好的結構數據如且需要保證資料一致性的時候，例如與金融相關或是商務相關的場景。

- No SQL:

    適合大量數據處理以及在全球多地佈署的場景例如:
    大型社交軟體、或是大數據分析的場景


# What is normalization?

**Normalization**
- 對資料表進行分割，降低資料的重複性即發生的異常現象，根據不同的相依性問題來分割 表格，分割後不能有資訊遺失
- 有低階的第一正規化、第二正規化、第三正規化、BCNF和高階的第四、第五正規化，但同嘗到第三正規化就夠，不然會造成表個太過細碎，導致要用到很多的JOIN而非常沒有效率。

**3NF**
 - 須滿足
    - 第一正規化 1NF:
    把<font color="red">多值屬性</font>或是<font color="red">複合屬性</font>拆解，確保每個資料都是**基元值**
    例如: 在一個食譜的原料屬性中存放的是(面粉、馬鈴薯、鹽巴)這就代表多值屬性，需要拆解成單一個資料面粉、馬鈴薯、鹽巴
    複合屬性例如生日年跟月一起紀錄而非年分跟月份是分開的。
    但是第一正規化會產生太多的重複資料。

        **未1NF**
        |     | ID  | 原料 |
        |  ----  | ----  | ----  |
        | 食譜一  | 1 | 麵粉、馬鈴薯、鹽巴 |
        | 食譜二  | 2 | 冬粉、鴨肉 |

        **1NF**
        |     | ID  | 原料 |
        |  ----  | ----  | ----  |
        | 食譜一  | 1 | 麵粉 |
        | 食譜一  | 1 | 馬鈴薯|
        | 食譜一  | 1 | 鹽巴 |
        | 食譜二  | 2 | 冬粉 |
        | 食譜二  | 2 | 鴨肉 |

    - 第二正規化 2NF:

      所有<font color="red">非主鍵</font>的屬性<font color="red">完全相依</font>於主鍵
      |  食譜ID  | 材料ID  | 食譜名稱  | 材料名稱 | 食譜類型 |
      |  ----  | ----  | ----  | ----  | ----  |
      |  1   | 2  | 蛋糕  | 麵粉 | 甜點 |
      |  1   | 3  | 蛋糕  | 雞蛋 | 甜點 |
       |  2   | 5  | 漢堡 | 牛絞肉 | 美式料理 |
       |  2   | 7  | 漢堡 | 麵包 | 美式料理 |

      上面的資料表食譜名稱及食譜類型只相依於食譜ID，材料名稱只相依於材料ID，導致了資料的冗餘，例如蛋糕漢堡這兩個食譜名稱出現了兩次，因此分割表格

      食譜表

      |  食譜ID  |  食譜名稱  | 食譜類型 |
      |  ----  | ----  | ----  |
      |  1   | 蛋糕  | 甜點  |
      |  2   | 漢堡  | 美式料理  |

      材料表

      |  材料ID  |  材料名稱  |
      |  ----  | ----  |
      |  2   | 麵粉  |
      |  3   | 雞蛋  |
      |  5   | 牛絞肉  |
      |  7   | 麵包  |

      兩張表的非主鍵屬性都是由主鍵唯一決定

    - 第三正規化 3NF:
      不存在遞移相依性的主鍵例如
      | 課程ID | 課程名稱 | 授課老師 | 教師辦公室 |
        | ------ | -------- | -------- | ---------- |
        | 101    | 數學     | 王老師  |  B205    |
        | 102    | 物理     | 李老師  |  A301    |
        | 103    | 化學     | 李老師  | A301     |

        教師辦公室是遞移相依性於課程ID所以要分割表格

        **老師資料表**

        | 老師ID | 授課老師 | 教師辦公室 |
        | ---------- | ------ | ------ |
        | T1   | 李老師 | A301|
        | T2    | 王老師 | B205  |

        **課程表**

         | 課程ID | 課程名稱 | 老師ID |
         | ---------- | ------ | ------ |
         | 101    | 數學    | T2 |
         | 102    | 物理    | T1 |
         | 103    | 化學    | T1 |

        老師辦公室與老師ID完全相依

        這樣所有表個都是具有完全相依性了，也就完成3NF











